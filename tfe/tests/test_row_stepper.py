from tfe.game._row_stepper import step_row

import pytest


CASES = [
    ([2, 0, 0, 0], [2, 0, 0, 0]),
    ([0, 2, 0, 0], [2, 0, 0, 0]),
    ([0, 0, 2, 0], [2, 0, 0, 0]),
    ([0, 0, 0, 2], [2, 0, 0, 0]),
    ([2, 2, 0, 0], [4, 0, 0, 0]),
    ([2, 0, 2, 0], [4, 0, 0, 0]),
    ([2, 0, 0, 2], [4, 0, 0, 0]),
    ([0, 2, 0, 2], [4, 0, 0, 0]),
    ([0, 2, 2, 0], [4, 0, 0, 0]),
    ([0, 0, 2, 2], [4, 0, 0, 0]),
    ([2, 2, 2, 0], [4, 2, 0, 0]),
    ([2, 2, 0, 2], [4, 2, 0, 0]),
    ([2, 0, 2, 2], [4, 2, 0, 0]),
    ([0, 2, 2, 2], [4, 2, 0, 0]),
    ([2, 2, 2, 2], [4, 4, 0, 0]),
    ([4, 2, 0, 0], [4, 2, 0, 0]),
    ([4, 2, 2, 0], [4, 4, 0, 0]),
    ([4, 0, 2, 2], [4, 4, 0, 0]),
    ([0, 4, 2, 2], [4, 4, 0, 0]),
    ([4, 4, 2, 2], [8, 4, 0, 0]),
    ([2, 4, 8, 16], [2, 4, 8, 16]),
]


@pytest.mark.parametrize("start,expected", CASES)
def test_step_row(start, expected):
    assert step_row(start) == expected
